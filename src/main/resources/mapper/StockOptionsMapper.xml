<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ibkr.mapper.StockOptionsMapper">
  <resultMap id="BaseResultMap" type="com.ibkr.entity.StockOptions">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Feb 23 15:30:54 CST 2019.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="cts" jdbcType="TIMESTAMP" property="cts" />
    <result column="uts" jdbcType="TIMESTAMP" property="uts" />
    <result column="price" jdbcType="VARCHAR" property="price" />
    <result column="symbol" jdbcType="VARCHAR" property="symbol" />
    <result column="strike" jdbcType="VARCHAR" property="strike" />
    <result column="right" jdbcType="VARCHAR" property="right" />
    <result column="expiry" jdbcType="VARCHAR" property="expiry" />
    <result column="volume" jdbcType="INTEGER" property="volume" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Feb 23 15:30:54 CST 2019.
    -->
    `id`, `cts`, `uts`, `price`, `symbol`, `strike`, `right`, `expiry`, `volume`
  </sql>
  <select id="selectByPrimaryKey" parameterType="com.ibkr.entity.StockOptions" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Feb 23 15:30:54 CST 2019.
    -->
    select 
    <include refid="Base_Column_List" />
    from stock_options
    where  symbol = #{symbol} and `right` = #{right} and  `expiry` = #{expiry}  and `price` = #{price} and `volume` = #{volume}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Feb 23 15:30:54 CST 2019.
    -->
    delete from stock_options
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.ibkr.entity.StockOptions">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Feb 23 15:30:54 CST 2019.
    -->
    insert into stock_options (cts,uts, price, symbol, strike, `right`, expiry, volume)
    values (#{cts,jdbcType=TIMESTAMP},#{uts,jdbcType=TIMESTAMP}, #{price,jdbcType=VARCHAR},
      #{symbol,jdbcType=VARCHAR}, #{strike,jdbcType=VARCHAR}, #{right,jdbcType=VARCHAR}, 
      #{expiry,jdbcType=VARCHAR}, #{volume,jdbcType=INTEGER})
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ibkr.entity.StockOptions">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Feb 23 15:30:54 CST 2019.
    -->
    update stock_options
    <set>
      <if test="cts != null">
        cts = #{cts,jdbcType=TIMESTAMP},
      </if>
      <if test="price != null">
        price = #{price,jdbcType=VARCHAR},
      </if>
      <if test="symbol != null">
        symbol = #{symbol,jdbcType=VARCHAR},
      </if>
      <if test="strike != null">
        strike = #{strike,jdbcType=VARCHAR},
      </if>
      <if test="right != null">
        `right` = #{right,jdbcType=VARCHAR},
      </if>
      <if test="expiry != null">
        expiry = #{expiry,jdbcType=VARCHAR},
      </if>
      <if test="volume != null">
        volume = #{volume,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ibkr.entity.StockOptions">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Feb 23 15:30:54 CST 2019.
    -->
    update stock_options
    set cts = #{cts,jdbcType=TIMESTAMP},
      price = #{price,jdbcType=VARCHAR},
      symbol = #{symbol,jdbcType=VARCHAR},
      strike = #{strike,jdbcType=VARCHAR},
      `right` = #{right,jdbcType=VARCHAR},
      expiry = #{expiry,jdbcType=VARCHAR},
      volume = #{volume,jdbcType=INTEGER}
    where id = #{id,jdbcType=BIGINT}
  </update>

  <select id="selectByOptions" parameterType="com.ibkr.entity.StockOptions" resultMap="BaseResultMap">
      select
          <include refid="Base_Column_List" />
      from
          stock_options
      where
          symbol = #{symbol,jdbcType=VARCHAR} and   strike = #{strike,jdbcType=VARCHAR}
      and
          `right` = #{right,jdbcType=VARCHAR} and expiry = #{expiry,jdbcType=VARCHAR}
      and
          DATE_FORMAT(uts ,'%Y-%m-%d')  = #{expiry,jdbcType=VARCHAR} order by id
  </select>
</mapper>